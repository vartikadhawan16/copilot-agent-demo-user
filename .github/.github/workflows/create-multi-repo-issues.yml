name: Create Issues on Multiple Repos

on:
  workflow_dispatch: # Manual trigger

jobs:
  create-issues:
    runs-on: ubuntu-latest
    steps:
      - name: Set up GitHub CLI
        run: |
          sudo apt-get install -y gh
          gh auth login --with-token <<< "${{ secrets.GH_PAT }}"

      - name: Create Issues on Multiple Repos
        run: |
          ISSUE_TITLE="Sync Docker and Gradle Configurations"
          ISSUE_BODY="Please update the repository to include Docker-related files and Gradle build updates based on reference standards."

          # List of repositories
          REPOS=("vartikadhawan16/copilot-agent-demo-user" "vartikadhawan16/copilot-agent-demo-org" "another-org/another-repo")

          # Loop through repositories and create issues
          for REPO in "${REPOS[@]}"; do
            echo "Creating issue on $REPO"
            gh issue create --repo "$REPO" \
              --title "$ISSUE_TITLE" \
              --body "$ISSUE_BODY" \
              --label "copilot-update"
          done
